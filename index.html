import React, { useState, useEffect, useRef } from 'react';
import { Canvas, useFrame, useThree } from '@react-three/fiber';
import { Html, OrbitControls, Stars, Text } from '@react-three/drei';

function Planet({ position, size, color, rotationSpeed }) {
  const meshRef = useRef();
  
  useFrame(() => {
    if (meshRef.current) {
      meshRef.current.rotation.y += rotationSpeed;
    }
  });

  return (
    <mesh ref={meshRef} position={position}>
      <sphereGeometry args={[size, 32, 32]} />
      <meshStandardMaterial color={color} />
    </mesh>
  );
}

function FloatingText({ position, text, color }) {
  return (
    <group position={position}>
      <Text fontSize={1.5} color={color} anchorX="center" anchorY="center">
        {text}
      </Text>
    </group>
  );
}

function App() {
  const [darkMode, setDarkMode] = useState(false);
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  
  useEffect(() => {
    const handleMouseMove = (e) => {
      setMousePosition({
        x: (e.clientX / window.innerWidth) * 2 - 1,
        y: -(e.clientY / window.innerHeight) * 2 + 1
      });
    };

    window.addEventListener('mousemove', handleMouseMove);
    return () => window.removeEventListener('mousemove', handleMouseMove);
  }, []);

  return (
    <div className={`app ${darkMode ? 'dark' : 'light'}`}>
      <button onClick={() => setDarkMode(!darkMode)}>
        {darkMode ? '🌙' : '☀️'}
      </button>
      
      <Canvas shadows dpr={[window.devicePixelRatio]}>
        <OrbitControls enableZoom={false} />
        
        {/* Background */}
        <Stars count={800} factor={4} depth={2000} color={darkMode ? '#fff' : '#7D36E2'} />
        
        {/* Planets */}
        <Planet 
          position={[0, 0, 0]} 
          size={1.5} 
          color="#8E2DE2" 
          rotationSpeed={0.005} 
        />
        <Planet 
          position={[5, 0, 0]} 
